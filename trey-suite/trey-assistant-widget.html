<!doctype html><html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Trey Assistant Widget</title>
<style>
  #fab{position:fixed;right:18px;bottom:18px;width:68px;height:68px;border-radius:50%;background:#1c2333;
       color:#fff;display:grid;place-items:center;box-shadow:0 10px 25px rgba(0,0,0,.35);cursor:pointer}
  #panel{position:fixed;right:18px;bottom:96px;width:360px;max-width:calc(100vw - 36px);height:520px;
         display:none;background:linear-gradient(180deg,#151726,#0f111a 60%);border:1px solid #2a2d3a;
         border-radius:18px;box-shadow:0 10px 25px rgba(0,0,0,.35);overflow:hidden;color:#e8ebf2;font:14px/1.4 system-ui}
  #panel.show{display:flex;flex-direction:column}
  .hdr{display:flex;align-items:center;gap:10px;padding:10px 12px;border-bottom:1px solid #2a2d3a;background:#161828}
  .body{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
  .input{display:flex;gap:8px;padding:10px;border-top:1px solid #2a2d3a;background:#0e1018}
  .input input{flex:1;padding:10px;border-radius:12px;border:1px solid #2a2d3a;background:#0b0d14;color:#e8ebf2}
  .input button{padding:10px 14px;border-radius:12px;background:#7c5cff;border:0;color:white;cursor:pointer}
</style>
<script src="supabase.config.js"></script>
</head><body>
<div id="fab" aria-label="Open Trey">T</div>
<div id="panel" role="dialog" aria-label="Trey panel">
  <div class="hdr"><strong style="margin-right:auto">Trey Assistant</strong></div>
  <div class="body" id="msgs"></div>
  <form class="input" id="frm">
    <input id="q" placeholder="Type a message..." autocomplete="off"/><button>Send</button>
  </form>
</div>
<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
  const cfg = window.BFF_SUPABASE || {};
  const supabase = createClient(cfg.url, cfg.anon);
  const $ = (s)=>document.querySelector(s); const panel=$("#panel"), fab=$("#fab"), msgs=$("#msgs"), frm=$("#frm"), q=$("#q");
  function push(side, text){ const div=document.createElement('div'); div.textContent=text; msgs.appendChild(div); msgs.scrollTop=msgs.scrollHeight; }
  fab.addEventListener('click',()=>panel.classList.toggle('show'));
  frm.addEventListener('submit',e=>{e.preventDefault();const t=q.value.trim();if(!t)return;q.value='';push('user',t);setTimeout(()=>push('ai','(demo) '+t),300)});
  push('ai','Trey ready.');
</script><!-- your existing JS ends -->
</script><script>
// inject floating hotfix CSS
(() => {
  const css = `
    :root { --bff-z: 2147483647; }
    .bff-fab { position: fixed !important; right: 18px !important; bottom: 18px !important; z-index: var(--bff-z) !important; }
    .bff-panel { position: fixed !important; right: 18px !important; bottom: 86px !important; width: min(420px, calc(100vw - 32px)) !important; max-height: min(80vh, 720px) !important; z-index: calc(var(--bff-z) - 1) !important; }
    @media (max-width: 520px) { .bff-panel { right: 8px !important; left: 8px !important; width: auto !important; } }
  `;
  const s = document.createElement('style');
  s.id = 'bff-float-hotfix';
  s.textContent = css;
  document.head.appendChild(s);
})();
</script>


<style id="bff-float-hotfix">
  :root { --bff-z: 2147483647; }
  .bff-fab {
    position: fixed !important;
    right: 18px !important;
    bottom: 18px !important;
    z-index: var(--bff-z) !important;
  }
  .bff-panel {
    position: fixed !important;
    right: 18px !important;
    bottom: 86px !important;
    width: min(420px, calc(100vw - 32px)) !important;
    max-height: min(80vh, 720px) !important;
    z-index: calc(var(--bff-z) - 1) !important;
  }
  @media (max-width: 520px) {
    .bff-panel { right: 8px !important; left: 8px !important; width: auto !important; }
  }
</style>
</body></html>

</body></html>